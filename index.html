<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Colombia - Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #000;
            -webkit-tap-highlight-color: transparent;
        }

        .year-wrapper {
            position: relative;
            display: inline-block;
        }

        #year-selector {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .holiday-text { color: #ff3b30; font-weight: 600; }
        
        .today-circle {
            background-color: #ff3b30;
            color: white !important;
            border-radius: 50%;
            font-weight: 700;
        }

        .month-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            font-size: 0.75rem;
        }

        .day-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
            border-radius: 50%;
        }

        .mini-month:hover .day-cell:not(.empty):not(.today-circle) {
            background-color: transparent;
        }

        .mini-month:hover h3 {
            color: #ff3b30;
        }

        #month-detail-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: white;
            z-index: 50;
            overflow-y: auto;
        }

        .expanded-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            max-width: 450px;
            margin: 0 auto;
        }

        .expanded-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            border-radius: 50%;
        }

        .weekday-label {
            color: #8e8e93;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            text-align: center;
            padding-bottom: 12px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade { animation: fadeIn 0.4s ease-out forwards; }
    </style>
</head>
<body class="p-6 md:p-10 pb-24">

    <!-- Header con el año en Grande y Rojo -->
    <header class="flex justify-between items-end mb-10 sticky top-0 bg-white/90 backdrop-blur-md py-4 z-10">
        <div class="year-wrapper">
            <h1 id="year-display" class="text-5xl md:text-6xl font-bold text-[#ff3b30] tracking-tight">2026</h1>
            <select id="year-selector" onchange="changeYear(this.value)">
                <!-- Opciones generadas por JS -->
            </select>
        </div>
        
        <div class="flex gap-2">
            <button onclick="changeYear(currentYear - 1)" class="p-2 rounded-full hover:bg-gray-100 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <button onclick="changeYear(currentYear + 1)" class="p-2 rounded-full hover:bg-gray-100 text-gray-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </header>

    <!-- Grid de Meses (Vista de Año) -->
    <main id="calendar-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-10 gap-y-12">
        <!-- Generado por JS -->
    </main>

    <!-- Overlay de Detalle (Información Ampliada) -->
    <div id="month-detail-overlay">
        <div class="p-6">
            <div class="flex justify-between items-center mb-12 max-w-xl mx-auto">
                <button onclick="closeDetail()" class="text-[#ff3b30] flex items-center gap-1 font-semibold text-xl">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    <span id="back-year-label"></span>
                </button>
                <h2 id="expanded-month-name" class="text-2xl font-bold"></h2>
                <div class="w-10"></div>
            </div>

            <div id="expanded-view-content" class="animate-fade"></div>

            <div id="holiday-list" class="max-w-md mx-auto mt-16 border-t border-gray-100 pt-8 space-y-5"></div>
        </div>
    </div>

    <!-- Navegación Tab Bar -->
    <nav class="fixed bottom-0 left-0 w-full bg-white/80 backdrop-blur-xl border-t border-gray-100 px-10 py-5 flex justify-between items-center z-30">
        <button onclick="goToToday()" class="text-[#ff3b30] font-bold text-lg flex flex-col items-center">
            Hoy
            <span id="today-dot" class="w-1.5 h-1.5 bg-[#ff3b30] rounded-full mt-0.5"></span>
        </button>
        <div class="flex gap-10 text-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
            <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
        </div>
    </nav>

    <script>
        let currentYear = new Date().getFullYear();
        const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
        const weekdays = ["D", "L", "M", "M", "J", "V", "S"];
        const fullWeekdays = ["Domingo", "Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado"];

        function getEaster(year) {
            const a = year % 19, b = Math.floor(year / 100), c = year % 100;
            const d = Math.floor(b / 4), e = b % 4, f = Math.floor((b + 8) / 25);
            const g = Math.floor((b - f + 1) / 3), h = (19 * a + b - d - g + 15) % 30;
            const i = Math.floor(c / 4), k = c % 4, l = (32 + 2 * e + 2 * i - h - k) % 7;
            const m = Math.floor((a + 11 * h + 22 * l) / 451);
            const month = Math.floor((h + l - 7 * m + 114) / 31);
            const day = ((h + l - 7 * m + 114) % 31) + 1;
            return new Date(year, month - 1, day);
        }

        function getNextMonday(date) {
            const res = new Date(date);
            if (res.getDay() === 1) return res;
            res.setDate(res.getDate() + (1 - res.getDay() + 7) % 7);
            return res;
        }

        function getHolidays(year) {
            const h = {};
            const easter = getEaster(year);
            const add = (d, name) => h[`${d.getMonth()}-${d.getDate()}`] = name;

            add(new Date(year, 0, 1), "Año Nuevo");
            add(new Date(year, 4, 1), "Día del Trabajo");
            add(new Date(year, 6, 20), "Independencia de Colombia");
            add(new Date(year, 7, 7), "Batalla de Boyacá");
            add(new Date(year, 11, 8), "Inmaculada Concepción");
            add(new Date(year, 11, 25), "Navidad");

            add(getNextMonday(new Date(year, 0, 6)), "Reyes Magos");
            add(getNextMonday(new Date(year, 2, 19)), "San José");
            add(getNextMonday(new Date(year, 5, 29)), "San Pedro y San Pablo");
            add(getNextMonday(new Date(year, 7, 15)), "Asunción de la Virgen");
            add(getNextMonday(new Date(year, 9, 12)), "Día de la Raza");
            add(getNextMonday(new Date(year, 10, 1)), "Todos los Santos");
            add(getNextMonday(new Date(year, 10, 11)), "Independencia de Cartagena");

            const jSanto = new Date(easter); jSanto.setDate(easter.getDate() - 3);
            const vSanto = new Date(easter); vSanto.setDate(easter.getDate() - 2);
            add(jSanto, "Jueves Santo"); add(vSanto, "Viernes Santo");

            const asc = new Date(easter); asc.setDate(easter.getDate() + 39);
            const corp = new Date(easter); corp.setDate(easter.getDate() + 60);
            const heart = new Date(easter); heart.setDate(easter.getDate() + 68);
            add(getNextMonday(asc), "Ascensión del Señor");
            add(getNextMonday(corp), "Corpus Christi");
            add(getNextMonday(heart), "Sagrado Corazón");

            return h;
        }

        function initYearSelector() {
            const select = document.getElementById('year-selector');
            const current = new Date().getFullYear();
            select.innerHTML = '';
            for (let y = current - 10; y <= current + 10; y++) {
                const opt = document.createElement('option');
                opt.value = y; opt.innerText = y;
                if (y === currentYear) opt.selected = true;
                select.appendChild(opt);
            }
        }

        function changeYear(year) {
            currentYear = parseInt(year);
            document.getElementById('year-display').innerText = currentYear;
            document.getElementById('year-selector').value = currentYear;
            
            const isTodayYear = new Date().getFullYear() === currentYear;
            document.getElementById('today-dot').style.opacity = isTodayYear ? "1" : "0";
            
            renderCalendar();
        }

        function renderCalendar() {
            const container = document.getElementById('calendar-container');
            container.innerHTML = '';
            const holidays = getHolidays(currentYear);
            const today = new Date();

            months.forEach((name, mIdx) => {
                const monthDiv = document.createElement('div');
                monthDiv.className = "cursor-pointer group mini-month animate-fade";
                monthDiv.onclick = () => openDetail(mIdx);

                const h3 = document.createElement('h3');
                h3.className = "text-xl font-bold mb-4 transition-colors";
                h3.innerText = name;
                monthDiv.appendChild(h3);

                const grid = document.createElement('div');
                grid.className = "month-grid";

                weekdays.forEach(d => {
                    grid.innerHTML += `<div class="text-[10px] text-gray-400 font-bold text-center mb-1.5">${d}</div>`;
                });

                const firstDay = new Date(currentYear, mIdx, 1).getDay();
                const totalDays = new Date(currentYear, mIdx + 1, 0).getDate();

                for (let i = 0; i < firstDay; i++) grid.innerHTML += `<div class="day-cell empty"></div>`;
                for (let d = 1; d <= totalDays; d++) {
                    const isHoliday = holidays[`${mIdx}-${d}`];
                    const isToday = today.getFullYear() === currentYear && today.getMonth() === mIdx && today.getDate() === d;
                    grid.innerHTML += `<div class="day-cell ${isHoliday ? 'holiday-text' : ''} ${isToday ? 'today-circle' : ''}">${d}</div>`;
                }

                monthDiv.appendChild(grid);
                container.appendChild(monthDiv);
            });
        }

        function openDetail(mIdx) {
            const overlay = document.getElementById('month-detail-overlay');
            const holidays = getHolidays(currentYear);
            const today = new Date();

            document.getElementById('expanded-month-name').innerText = months[mIdx];
            document.getElementById('back-year-label').innerText = currentYear;
            
            const content = document.getElementById('expanded-view-content');
            const hList = document.getElementById('holiday-list');
            content.innerHTML = '';
            hList.innerHTML = '';

            const grid = document.createElement('div');
            grid.className = "expanded-grid";

            weekdays.forEach(d => {
                grid.innerHTML += `<div class="weekday-label">${d}</div>`;
            });

            const firstDay = new Date(currentYear, mIdx, 1).getDay();
            const totalDays = new Date(currentYear, mIdx + 1, 0).getDate();
            const foundHolidays = [];

            for (let i = 0; i < firstDay; i++) grid.innerHTML += `<div></div>`;
            for (let d = 1; d <= totalDays; d++) {
                const isHoliday = holidays[`${mIdx}-${d}`];
                const isToday = today.getFullYear() === currentYear && today.getMonth() === mIdx && today.getDate() === d;
                grid.innerHTML += `<div class="expanded-day ${isHoliday ? 'holiday-text' : ''} ${isToday ? 'today-circle' : ''}">${d}</div>`;
                if(isHoliday) foundHolidays.push({d, name: isHoliday});
            }

            content.appendChild(grid);

            if (foundHolidays.length > 0) {
                hList.innerHTML = '<h4 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-6">Festivos</h4>';
                foundHolidays.forEach(h => {
                    const dayName = fullWeekdays[new Date(currentYear, mIdx, h.d).getDay()];
                    hList.innerHTML += `
                        <div class="flex items-start gap-5 animate-fade">
                            <div class="text-[#ff3b30] font-bold w-6 text-xl">${h.d}</div>
                            <div>
                                <div class="font-bold text-gray-900 text-lg leading-tight">${h.name}</div>
                                <div class="text-sm text-gray-500 mt-0.5">${dayName}</div>
                            </div>
                        </div>
                    `;
                });
            }

            overlay.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeDetail() {
            document.getElementById('month-detail-overlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function goToToday() {
            const today = new Date();
            changeYear(today.getFullYear());
            renderCalendar();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.onload = () => {
            initYearSelector();
            changeYear(new Date().getFullYear());
        };
    </script>
</body>
</html>


